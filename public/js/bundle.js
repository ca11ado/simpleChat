(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 08.11.2015.
 */

var SChatDispatcher = require('../dispatcher/SChatDispatcher'),
    SChatConstants = require('../constants/SChatConstants');

module.exports = {
    updateListOfUsers: function updateListOfUsers(newList) {
        SChatDispatcher.dispatch({
            actionType: SChatConstants.ACTIVATE_LOGIN_FORM,
            list: newList
        });
    },
    connectedToWebSocket: function connectedToWebSocket() {
        console.log('f:SChatActions > WebSocket connected');
        SChatDispatcher.dispatch({
            actionType: SChatConstants.CONN_OPEN
        });
    },
    authorized: function authorized(userName) {
        console.log('f:SChatActions > user %o authorized', userName);
        SChatDispatcher.dispatch({
            actionType: SChatConstants.AUTHORIZED,
            userName: userName
        });
    }
};

},{"../constants/SChatConstants":8,"../dispatcher/SChatDispatcher":9}],2:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 06.11.2015.
 */

var chat = require('./chat/chat');
var ws = require('./chat/websocket');
var dispatcher = require('./dispatcher/SChatDispatcher');
var component = require('./components/SChatComponent'),
    SChatUsersStore = require('./stores/SChatUsersStore');

console.log('start app');

ws.connect('ws://localhost:8080');

/*
function testFn(...rest) {
    console.log(rest);
}
testFn('dd', 'tt', 'pp');*/

},{"./chat/chat":4,"./chat/websocket":6,"./components/SChatComponent":7,"./dispatcher/SChatDispatcher":9,"./stores/SChatUsersStore":12}],3:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 08.11.2015.
 */

var keyMirror = require('../lib/MyUtils').keyMirror;

var MSG_TYPES = keyMirror({
    AUTH: null,
    HISTORY: null,
    MESSAGE: null,
    SYSTEM: null
});

function Msg(type, data) {
    if (!type || !data) new Error('�� ����� ���� �� ���������� ���������');
    this.type = type;
    this.data = data;
}
Msg.prototype.getType = function () {
    return this.type;
};
Msg.prototype.getData = function () {
    return this.data;
};

function MsgAuth(data) {
    this.type = MSG_TYPES.AUTH;
    this.data = data;
}
MsgAuth.prototype = Object.create(Msg.prototype);
MsgAuth.prototype.constructor = MsgAuth;

function MsgHistory(data) {
    this.type = MSG_TYPES.HISTORY;
    this.data = data;
}
MsgHistory.prototype = Object.create(Msg.prototype);
MsgHistory.prototype.constructor = MsgHistory;

function MsgMessage(data) {
    this.type = MSG_TYPES.MESSAGE;
    this.data = data;
}
MsgMessage.prototype = Object.create(Msg.prototype);
MsgMessage.prototype.constructor = MsgMessage;

module.exports = {
    createAuth: function createAuth(data) {
        return new MsgAuth(data);
    },
    createMessage: function createMessage(data) {
        return new MsgMessage(data);
    },
    getMsgTypes: function getMsgTypes() {
        return MSG_TYPES;
    }
};

},{"../lib/MyUtils":10}],4:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 06.11.2015.
 */

var ws = require('./websocket.js');
var dispatcher = require('../dispatcher/SChatDispatcher');

/*setTimeout(function(){
  ws.sendTestMsg('test message from chat');
},2000);*/

module.exports = [{
  name: 't0s',
  messages: 10
}, {
  name: 'test',
  messages: 5
}];

},{"../dispatcher/SChatDispatcher":9,"./websocket.js":6}],5:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 07.11.2015.
 */

var WS = require('./websocket'),
    Msg = require('./Message');

/* Обработчики интерфейса */
var button = document.getElementById('button');
button.onclick = function (e) {
    var input = document.getElementById('login').querySelector('input');
    if (input.value) WS.sendMsg(Msg.createAuth({ userName: input.value }));
};

var Interface = {
    showSection: function showSection(section) {
        var sections = document.getElementsByClassName('mainSection'),
            activateSection = document.getElementById(section);
        //console.log('Sections %o %o', section, sections.length);
        for (var i = 0; i < sections.length; i++) {
            sections[i].hidden = true;
        }
        activateSection.hidden = false;
    }
};

module.exports = Interface;

},{"./Message":3,"./websocket":6}],6:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 07.11.2015.
 */
var SChatActions = require('../actions/SChatActions'),
    MsgTypes = require('./Message').getMsgTypes();

var _socket = undefined,
    _events = {};
var WS_TYPE_NEW = 'new',
    WS_TYPE_MSG = "message";

function message(type, data) {
  switch (type) {
    case types.NEW:
      return { type: types.NEW, login: data.login };
      break;
    case types.MESSAGE:
      return { type: types.MESSAGE, login: data.login, msg: data.msg, time: data.time };
      break;
    default:
    //nothing
  }
}

var WS = {

  connect: function connect(url) {
    console.log('starting ws');
    if (_socket) return Error('Уже есть соединение');

    _socket = new WebSocket(url);

    _socket.onopen = function () {
      SChatActions.connectedToWebSocket();
      /*setTimeout(function () {
        _socket.send('New test user');
      }, 2000);*/
    };
    _socket.onclose = function (event) {
      console.log('Код: ' + event.code + ' причина: ' + event.reason);
    };
    _socket.onmessage = function (event) {
      console.log("f:websocket > получены данные %o", event.data);
      //SChatActions.authorized('Test');
      switch (event.data.type) {
        case MsgTypes.AUTH:
          SChatActions.authorized(event.data.userName);
          break;
        default:
        //todo don't know this type
      }
    };
    _socket.onerror = function (error) {
      console.log("Ошибка " + error.message);
    };

    return _socket;
  },

  getSocket: function getSocket() {
    return _socket;
  },

  sendMsg: function sendMsg(msg) {
    if (_socket) _socket.send(msg);else new Error('Socket does not exist yet');
    console.log('Send message %o', JSON.stringify(msg));
  },

  sendTestMsg: function sendTestMsg(txt) {
    _socket.send(txt);
  }

};

module.exports = WS;

},{"../actions/SChatActions":1,"./Message":3}],7:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 08.11.2015.
 */

var ChatInterface = require('../chat/interface');

var SChatActions = require('../actions/SChatActions'),
    SChatUsersStore = require('../stores/SChatUsersStore'),
    SChatSectionsStore = require('../stores/SChatSectionsStore');

SChatUsersStore.addChangeListener(function () {
    console.log('Component retrieve data from store');
});

SChatSectionsStore.addChangeListener(function () {
    //console.log('f:SChatComponent > Activate section: ', SChatSectionsStore.getActiveSection());
    ChatInterface.showSection(SChatSectionsStore.getActiveSection());
});

module.exports = setTimeout(function () {
    SChatActions.updateListOfUsers(['user1', 'user2']);
}, 2000);

},{"../actions/SChatActions":1,"../chat/interface":5,"../stores/SChatSectionsStore":11,"../stores/SChatUsersStore":12}],8:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 08.11.2015.
 */

var keyMirror = require('../lib/MyUtils').keyMirror;

var SChatConstants = keyMirror({
    CONN_OPEN: null,
    AUTHORIZED: null,
    UPDATE_USERS_LIST: null
});

module.exports = SChatConstants;

},{"../lib/MyUtils":10}],9:[function(require,module,exports){
"use strict";

/**
 * Created by tos on 08.11.2015.
 */

var _callbacks = [];

module.exports = {
    register: function register(callback) {
        _callbacks.push(callback);
    },
    dispatch: function dispatch(action) {
        _callbacks.map(function (v) {
            v(action);
        });
    }
};

},{}],10:[function(require,module,exports){
"use strict";

/**
 * Created by tos on 08.11.2015.
 */

module.exports = {
    keyMirror: function keyMirror(obj) {
        for (var key in obj) {
            if (obj.hasOwnProperty(key)) obj[key] = key;
        }
        return obj;
    }
};

},{}],11:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 08.11.2015.
 */

var SChatDispatcher = require('../dispatcher/SChatDispatcher'),
    SChatConstants = require('../constants/SChatConstants'),
    Emitter = require('./emiter');

var CHANGE_EVENT = 'change',
    SECTION_LOGIN = 'login',
    SECTION_CHAT = 'chat';

var _sections = {
    SECTION_LOGIN: false,
    SECTION_CHAT: false
};

function activateSection(section) {
    for (var key in _sections) {
        if (_sections.hasOwnProperty(key)) _sections[key] = false;
        _sections[section] = true;
    }
}

var SChatSectionsStore = Object.assign({}, Emitter.prototype, {
    addChangeListener: function addChangeListener(callback) {
        this.addMyListener(CHANGE_EVENT, callback);
    },

    getActiveSection: function getActiveSection() {
        for (var key in _sections) {
            if (_sections.hasOwnProperty(key) && _sections[key]) return key;
        }
    }
});

SChatDispatcher.register(function (action) {
    //console.log('DISPATCHER registered in SChatSectionsStore');
    switch (action.actionType) {
        case SChatConstants.CONN_OPEN:
            activateSection(SECTION_LOGIN);
            SChatSectionsStore.emit(CHANGE_EVENT);
            break;
        case SChatConstants.AUTHORIZED:
            activateSection(SECTION_CHAT);
            SChatSectionsStore.emit(CHANGE_EVENT);
            break;
        default:
        //nothing
    }
});

module.exports = SChatSectionsStore;

},{"../constants/SChatConstants":8,"../dispatcher/SChatDispatcher":9,"./emiter":13}],12:[function(require,module,exports){
'use strict';

/**
 * Created by tos on 08.11.2015.
 */

var SChatDispatcher = require('../dispatcher/SChatDispatcher'),
    SChatConstants = require('../constants/SChatConstants'),
    Emitter = require('./emiter');

var CHANGE_EVENT = 'change';
var _users = [];

function updateUsers(newUsers) {
    _users = newUsers;
}

var SChatUsersStore = Object.assign({}, Emitter.prototype, {
    addChangeListener: function addChangeListener(callback) {
        this.addMyListener(CHANGE_EVENT, callback);
    }
});

SChatDispatcher.register(function (action) {
    //console.log('DISPATCHER registered in SChatUsersStore');
    switch (action.actionType) {
        case SChatConstants.ACTIVATE_LOGIN_FORM:
            //SChatUsersStore.emit(CHANGE_EVENT);
            break;
        default:
        //nothing
    }
});

module.exports = SChatUsersStore;

},{"../constants/SChatConstants":8,"../dispatcher/SChatDispatcher":9,"./emiter":13}],13:[function(require,module,exports){
"use strict";

/**
 * Created by tos on 08.11.2015.
 */

var Emitter = function Emitter() {};

Emitter.prototype.addMyListener = function (event, listener) {
    if (!this._events) this._events = {};
    if (!this._events.hasOwnProperty(event)) this._events[event] = [];
    this._events[event].push(listener);
};

Emitter.prototype.emit = function (event, arg) {
    if (this._events && this._events.hasOwnProperty(event)) {
        this._events[event].map(function (v) {
            v(arg);
        });
    }
};

module.exports = Emitter;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiU0NoYXRBY3Rpb25zLmpzIiwiYXBwLmpzIiwiTWVzc2FnZS5qcyIsImNoYXQuanMiLCJpbnRlcmZhY2UuanMiLCJ3ZWJzb2NrZXQuanMiLCJTQ2hhdENvbXBvbmVudC5qcyIsIlNDaGF0Q29uc3RhbnRzLmpzIiwiU0NoYXREaXNwYXRjaGVyLmpzIiwiTXlVdGlscy5qcyIsIlNDaGF0U2VjdGlvbnNTdG9yZS5qcyIsIlNDaGF0VXNlcnNTdG9yZS5qcyIsImVtaXRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0lBLElBQUksZUFBZSxHQUFHLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztJQUMxRCxjQUFjLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7O0FBRTVELE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDYixxQkFBaUIsRUFBRSwyQkFBUyxPQUFPLEVBQUM7QUFDbEMsdUJBQWUsQ0FBQyxRQUFRLENBQUM7QUFDckIsc0JBQVUsRUFBRSxjQUFjLENBQUMsbUJBQW1CO0FBQzlDLGdCQUFJLEVBQUUsT0FBTztTQUNoQixDQUFDLENBQUM7S0FDSjtBQUNELHdCQUFvQixFQUFFLGdDQUFVO0FBQzVCLGVBQU8sQ0FBQyxHQUFHLENBQUMsc0NBQXNDLENBQUMsQ0FBQztBQUNwRCx1QkFBZSxDQUFDLFFBQVEsQ0FBQztBQUNyQixzQkFBVSxFQUFFLGNBQWMsQ0FBQyxTQUFTO1NBQ3ZDLENBQUMsQ0FBQztLQUNOO0FBQ0QsY0FBVSxFQUFFLG9CQUFTLFFBQVEsRUFBRTtBQUMzQixlQUFPLENBQUMsR0FBRyxDQUFDLHFDQUFxQyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdELHVCQUFlLENBQUMsUUFBUSxDQUFDO0FBQ3JCLHNCQUFVLEVBQUUsY0FBYyxDQUFDLFVBQVU7QUFDckMs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dEMsQ0FBQzs7QUFFRixPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxVQUFTLEtBQUssRUFBRSxHQUFHLEVBQUU7QUFDMUMsUUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ3BELFlBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVMsQ0FBQyxFQUFFO0FBQ2hDLGFBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNWLENBQUMsQ0FBQTtLQUNMO0NBQ0osQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcclxuICogQ3JlYXRlZCBieSB0b3Mgb24gMDguMTEuMjAxNS5cclxuICovXHJcblxyXG5sZXQgU0NoYXREaXNwYXRjaGVyID0gcmVxdWlyZSgnLi4vZGlzcGF0Y2hlci9TQ2hhdERpc3BhdGNoZXInKSxcclxuICAgIFNDaGF0Q29uc3RhbnRzID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL1NDaGF0Q29uc3RhbnRzJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIHVwZGF0ZUxpc3RPZlVzZXJzOiBmdW5jdGlvbihuZXdMaXN0KXtcclxuICAgICAgU0NoYXREaXNwYXRjaGVyLmRpc3BhdGNoKHtcclxuICAgICAgICAgIGFjdGlvblR5cGU6IFNDaGF0Q29uc3RhbnRzLkFDVElWQVRFX0xPR0lOX0ZPUk0sXHJcbiAgICAgICAgICBsaXN0OiBuZXdMaXN0XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGNvbm5lY3RlZFRvV2ViU29ja2V0OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdmOlNDaGF0QWN0aW9ucyA+IFdlYlNvY2tldCBjb25uZWN0ZWQnKTtcclxuICAgICAgICBTQ2hhdERpc3BhdGNoZXIuZGlzcGF0Y2goe1xyXG4gICAgICAgICAgICBhY3Rpb25UeXBlOiBTQ2hhdENvbnN0YW50cy5DT05OX09QRU5cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhdXRob3JpemVkOiBmdW5jdGlvbih1c2VyTmFtZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdmOlNDaGF0QWN0aW9ucyA+IHVzZXIgJW8gYXV0aG9yaXplZCcsIHVzZXJOYW1lKTtcclxuICAgICAgICBTQ2hhdERpc3BhdGNoZXIuZGlzcGF0Y2goe1xyXG4gICAgICAgICAgICBhY3Rpb25UeXBlOiBTQ2hhdENvbnN0YW50cy5BVVRIT1JJWkVELFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogdXNlck5hbWVcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHRvcyBvbiAwNi4xMS4yMDE1LlxyXG4gKi9cclxuXHJcbmxldCBjaGF0ID0gcmVxdWlyZSgnLi9jaGF0L2NoYXQnKTtcclxubGV0IHdzID0gcmVxdWlyZSgnLi9jaGF0L3dlYnNvY2tldCcpO1xyXG5sZXQgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hlci9TQ2hhdERpc3BhdGNoZXInKTtcclxubGV0IGNvbXBvbmVudCA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9TQ2hhdENvbXBvbmVudCcpLFxyXG4gICAgU0NoYXRVc2Vyc1N0b3JlID0gcmVxdWlyZSgnLi9zdG9yZXMvU0NoYXRVc2Vyc1N0b3JlJyk7XHJcblxyXG5jb25zb2xlLmxvZygnc3RhcnQgYXBwJyk7XHJcblxyXG53cy5jb25uZWN0KCd3czovL2xvY2FsaG9zdDo4MDgwJyk7XHJcblxyXG4vKlxyXG5mdW5jdGlvbiB0ZXN0Rm4oLi4ucmVzdCkge1xyXG4gICAgY29uc29sZS5sb2cocmVzdCk7XHJcbn1cclxudGVzdEZuKCdkZCcsICd0dCcsICdwcCcpOyovXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHRvcyBvbiAwOC4xMS4yMDE1LlxyXG4gKi9cclxuXHJcbmxldCBrZXlNaXJyb3IgPSByZXF1aXJlKCcuLi9saWIvTXlVdGlscycpLmtleU1pcnJvclxyXG5cclxuY29uc3QgTVNHX1RZUEVTID0ga2V5TWlycm9yKHtcclxuICAgIEFVVEg6IG51bGwsXHJcbiAgICBISVNUT1JZOiBudWxsLFxyXG4gICAgTUVTU0FHRTogbnVsbCxcclxuICAgIFNZU1RFTTogbnVsbFxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIE1zZyh0eXBlLGRhdGEpIHtcclxuICAgIGlmICghdHlwZSB8fCAhZGF0YSkgbmV3IEVycm9yKCfvv73vv70g77+977+977+977+977+9IO+/ve+/ve+/ve+/vSDvv73vv70g77+977+977+977+977+977+977+977+977+977+9IO+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/vScpO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbn1cclxuTXNnLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlO1xyXG59O1xyXG5Nc2cucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gTXNnQXV0aCAoZGF0YSkge1xyXG4gICAgdGhpcy50eXBlID0gTVNHX1RZUEVTLkFVVEg7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG59XHJcbk1zZ0F1dGgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNc2cucHJvdG90eXBlKTtcclxuTXNnQXV0aC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNc2dBdXRoO1xyXG5cclxuZnVuY3Rpb24gTXNnSGlzdG9yeSAoZGF0YSkge1xyXG4gICAgdGhpcy50eXBlID0gTVNHX1RZUEVTLkhJU1RPUlk7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG59XHJcbk1zZ0hpc3RvcnkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNc2cucHJvdG90eXBlKTtcclxuTXNnSGlzdG9yeS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNc2dIaXN0b3J5O1xyXG5cclxuZnVuY3Rpb24gTXNnTWVzc2FnZSAoZGF0YSkge1xyXG4gICAgdGhpcy50eXBlID0gTVNHX1RZUEVTLk1FU1NBR0U7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG59XHJcbk1zZ01lc3NhZ2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNc2cucHJvdG90eXBlKTtcclxuTXNnTWVzc2FnZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNc2dNZXNzYWdlO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBjcmVhdGVBdXRoOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNc2dBdXRoKGRhdGEpO1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZU1lc3NhZ2U6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1zZ01lc3NhZ2UoZGF0YSk7XHJcbiAgICB9LFxyXG4gICAgZ2V0TXNnVHlwZXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBNU0dfVFlQRVM7XHJcbiAgICB9XHJcbn07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdG9zIG9uIDA2LjExLjIwMTUuXHJcbiAqL1xyXG5cclxubGV0IHdzID0gcmVxdWlyZSgnLi93ZWJzb2NrZXQuanMnKTtcclxubGV0IGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9kaXNwYXRjaGVyL1NDaGF0RGlzcGF0Y2hlcicpO1xyXG5cclxuLypzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgd3Muc2VuZFRlc3RNc2coJ3Rlc3QgbWVzc2FnZSBmcm9tIGNoYXQnKTtcclxufSwyMDAwKTsqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ3QwcycsXHJcbiAgICBtZXNzYWdlczogMTBcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICd0ZXN0JyxcclxuICAgIG1lc3NhZ2VzOiA1XHJcbiAgfVxyXG5dOyIsIi8qKlxuICogQ3JlYXRlZCBieSB0b3Mgb24gMDcuMTEuMjAxNS5cbiAqL1xuXG5cbmxldCBXUyA9IHJlcXVpcmUoJy4vd2Vic29ja2V0JyksXG4gICAgTXNnID0gcmVxdWlyZSgnLi9NZXNzYWdlJyk7XG5cbi8qINCe0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LjQvdGC0LXRgNGE0LXQudGB0LAgKi9cbmxldCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uJyk7XG5idXR0b24ub25jbGljayA9IGZ1bmN0aW9uKGUpe1xuICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbicpLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgaWYgKGlucHV0LnZhbHVlKSBXUy5zZW5kTXNnKE1zZy5jcmVhdGVBdXRoKHt1c2VyTmFtZTppbnB1dC52YWx1ZX0pKTtcbn07XG5cblxubGV0IEludGVyZmFjZSA9IHtcbiAgICBzaG93U2VjdGlvbjogZnVuY3Rpb24oc2VjdGlvbikge1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtYWluU2VjdGlvbicpLFxuICAgICAgICAgICAgYWN0aXZhdGVTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbik7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ1NlY3Rpb25zICVvICVvJywgc2VjdGlvbiwgc2VjdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpPHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWN0aW9uc1tpXS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGFjdGl2YXRlU2VjdGlvbi5oaWRkZW4gPSBmYWxzZTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVyZmFjZTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB0b3Mgb24gMDcuMTEuMjAxNS5cclxuICovXHJcbmxldCBTQ2hhdEFjdGlvbnMgPSByZXF1aXJlKCcuLi9hY3Rpb25zL1NDaGF0QWN0aW9ucycpLFxyXG4gICAgTXNnVHlwZXMgPSByZXF1aXJlKCcuL01lc3NhZ2UnKS5nZXRNc2dUeXBlcygpO1xyXG5cclxubGV0IF9zb2NrZXQsXHJcbiAgICBfZXZlbnRzID0ge307XHJcbmNvbnN0IFdTX1RZUEVfTkVXID0gJ25ldycsXHJcbiAgICAgIFdTX1RZUEVfTVNHID0gXCJtZXNzYWdlXCI7XHJcblxyXG5mdW5jdGlvbiBtZXNzYWdlKHR5cGUsZGF0YSkge1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSB0eXBlcy5ORVc6XHJcbiAgICAgIHJldHVybiB7dHlwZTogdHlwZXMuTkVXLCBsb2dpbjogZGF0YS5sb2dpbn07XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSB0eXBlcy5NRVNTQUdFOlxyXG4gICAgICByZXR1cm4ge3R5cGU6IHR5cGVzLk1FU1NBR0UsIGxvZ2luOmRhdGEubG9naW4sIG1zZzogZGF0YS5tc2csIHRpbWU6IGRhdGEudGltZX07XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdCA6XHJcbiAgICAgIC8vbm90aGluZ1xyXG4gIH1cclxufVxyXG5cclxubGV0IFdTID0ge1xyXG5cclxuICBjb25uZWN0OiBmdW5jdGlvbih1cmwpIHtcclxuICAgIGNvbnNvbGUubG9nKCdzdGFydGluZyB3cycpO1xyXG4gICAgaWYgKF9zb2NrZXQpIHJldHVybiBFcnJvcign0KPQttC1INC10YHRgtGMINGB0L7QtdC00LjQvdC10L3QuNC1Jyk7XHJcblxyXG4gICAgX3NvY2tldCA9IG5ldyBXZWJTb2NrZXQodXJsKTtcclxuXHJcbiAgICBfc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBTQ2hhdEFjdGlvbnMuY29ubmVjdGVkVG9XZWJTb2NrZXQoKTtcclxuICAgICAgLypzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc29ja2V0LnNlbmQoJ05ldyB0ZXN0IHVzZXInKTtcclxuICAgICAgfSwgMjAwMCk7Ki9cclxuICAgIH07XHJcbiAgICBfc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbihldmVudCkgeyBjb25zb2xlLmxvZygn0JrQvtC0OiAnICsgZXZlbnQuY29kZSArICcg0L/RgNC40YfQuNC90LA6ICcgKyBldmVudC5yZWFzb24pOyB9O1xyXG4gICAgX3NvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImY6d2Vic29ja2V0ID4g0L/QvtC70YPRh9C10L3RiyDQtNCw0L3QvdGL0LUgJW9cIiwgZXZlbnQuZGF0YSk7XHJcbiAgICAgIC8vU0NoYXRBY3Rpb25zLmF1dGhvcml6ZWQoJ1Rlc3QnKTtcclxuICAgICAgc3dpdGNoIChldmVudC5kYXRhLnR5cGUpIHtcclxuICAgICAgICBjYXNlIE1zZ1R5cGVzLkFVVEg6XHJcbiAgICAgICAgICBTQ2hhdEFjdGlvbnMuYXV0aG9yaXplZChldmVudC5kYXRhLnVzZXJOYW1lKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgLy90b2RvIGRvbid0IGtub3cgdGhpcyB0eXBlXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBfc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikgeyBjb25zb2xlLmxvZyhcItCe0YjQuNCx0LrQsCBcIiArIGVycm9yLm1lc3NhZ2UpOyB9O1xyXG5cclxuICAgIHJldHVybiBfc29ja2V0O1xyXG4gIH0sXHJcblxyXG4gIGdldFNvY2tldDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gX3NvY2tldDtcclxuICB9LFxyXG5cclxuICBzZW5kTXNnOiBmdW5jdGlvbihtc2cpIHtcclxuICAgIGlmIChfc29ja2V0KSBfc29ja2V0LnNlbmQobXNnKTtcclxuICAgIGVsc2UgbmV3IEVycm9yKCdTb2NrZXQgZG9lcyBub3QgZXhpc3QgeWV0Jyk7XHJcbiAgICBjb25zb2xlLmxvZygnU2VuZCBtZXNzYWdlICVvJywgSlNPTi5zdHJpbmdpZnkobXNnKSk7XHJcbiAgfSxcclxuXHJcbiAgc2VuZFRlc3RNc2c6IGZ1bmN0aW9uKHR4dCkge1xyXG4gICAgX3NvY2tldC5zZW5kKHR4dCk7XHJcbiAgfVxyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV1M7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdG9zIG9uIDA4LjExLjIwMTUuXHJcbiAqL1xyXG5cclxubGV0IENoYXRJbnRlcmZhY2UgPSByZXF1aXJlKCcuLi9jaGF0L2ludGVyZmFjZScpO1xyXG5cclxubGV0IFNDaGF0QWN0aW9ucyA9IHJlcXVpcmUoJy4uL2FjdGlvbnMvU0NoYXRBY3Rpb25zJyksXHJcbiAgICBTQ2hhdFVzZXJzU3RvcmUgPSByZXF1aXJlKCcuLi9zdG9yZXMvU0NoYXRVc2Vyc1N0b3JlJyksXHJcbiAgICBTQ2hhdFNlY3Rpb25zU3RvcmUgPSByZXF1aXJlKCcuLi9zdG9yZXMvU0NoYXRTZWN0aW9uc1N0b3JlJyk7XHJcblxyXG5TQ2hhdFVzZXJzU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCByZXRyaWV2ZSBkYXRhIGZyb20gc3RvcmUnKTtcclxufSk7XHJcblxyXG5TQ2hhdFNlY3Rpb25zU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgLy9jb25zb2xlLmxvZygnZjpTQ2hhdENvbXBvbmVudCA+IEFjdGl2YXRlIHNlY3Rpb246ICcsIFNDaGF0U2VjdGlvbnNTdG9yZS5nZXRBY3RpdmVTZWN0aW9uKCkpO1xyXG4gICAgQ2hhdEludGVyZmFjZS5zaG93U2VjdGlvbihTQ2hhdFNlY3Rpb25zU3RvcmUuZ2V0QWN0aXZlU2VjdGlvbigpKTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgIFNDaGF0QWN0aW9ucy51cGRhdGVMaXN0T2ZVc2VycyhbJ3VzZXIxJywndXNlcjInXSk7XHJcbn0sMjAwMCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdG9zIG9uIDA4LjExLjIwMTUuXHJcbiAqL1xyXG5cclxubGV0IGtleU1pcnJvciA9IHJlcXVpcmUoJy4uL2xpYi9NeVV0aWxzJykua2V5TWlycm9yO1xyXG5cclxubGV0IFNDaGF0Q29uc3RhbnRzID0ga2V5TWlycm9yKHtcclxuICAgIENPTk5fT1BFTjogbnVsbCxcclxuICAgIEFVVEhPUklaRUQ6IG51bGwsXHJcbiAgICBVUERBVEVfVVNFUlNfTElTVDogbnVsbFxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU0NoYXRDb25zdGFudHM7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdG9zIG9uIDA4LjExLjIwMTUuXHJcbiAqL1xyXG5cclxubGV0IF9jYWxsYmFja3MgPSBbXTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKXtcclxuICAgICAgICBfY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfSxcclxuICAgIGRpc3BhdGNoOiBmdW5jdGlvbihhY3Rpb24pe1xyXG4gICAgICAgIF9jYWxsYmFja3MubWFwKGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgIHYoYWN0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB0b3Mgb24gMDguMTEuMjAxNS5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGtleU1pcnJvcjogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBvYmopIHtcclxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSBvYmpba2V5XSA9IGtleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxufTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB0b3Mgb24gMDguMTEuMjAxNS5cclxuICovXHJcblxyXG5cclxubGV0IFNDaGF0RGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4uL2Rpc3BhdGNoZXIvU0NoYXREaXNwYXRjaGVyJyksXHJcbiAgICBTQ2hhdENvbnN0YW50cyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9TQ2hhdENvbnN0YW50cycpLFxyXG4gICAgRW1pdHRlciA9IHJlcXVpcmUoJy4vZW1pdGVyJyk7XHJcblxyXG5jb25zdCAgIENIQU5HRV9FVkVOVCA9ICdjaGFuZ2UnLFxyXG4gICAgICAgIFNFQ1RJT05fTE9HSU4gPSAnbG9naW4nLFxyXG4gICAgICAgIFNFQ1RJT05fQ0hBVCA9ICdjaGF0JztcclxuXHJcbmxldCBfc2VjdGlvbnMgPSB7XHJcbiAgICBTRUNUSU9OX0xPR0lOOiBmYWxzZSxcclxuICAgIFNFQ1RJT05fQ0hBVDogZmFsc2VcclxufTtcclxuXHJcbmZ1bmN0aW9uIGFjdGl2YXRlU2VjdGlvbihzZWN0aW9uKSB7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gX3NlY3Rpb25zKSB7XHJcbiAgICAgICAgaWYgKF9zZWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBfc2VjdGlvbnNba2V5XSA9IGZhbHNlO1xyXG4gICAgICAgIF9zZWN0aW9uc1tzZWN0aW9uXSA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCBTQ2hhdFNlY3Rpb25zU3RvcmUgPSBPYmplY3QuYXNzaWduKHt9LCBFbWl0dGVyLnByb3RvdHlwZSwge1xyXG4gICAgYWRkQ2hhbmdlTGlzdGVuZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5hZGRNeUxpc3RlbmVyKENIQU5HRV9FVkVOVCwgY2FsbGJhY2spO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRBY3RpdmVTZWN0aW9uOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBfc2VjdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKF9zZWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIF9zZWN0aW9uc1trZXldKSByZXR1cm4ga2V5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcblxyXG5TQ2hhdERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24oYWN0aW9uKXtcclxuICAgIC8vY29uc29sZS5sb2coJ0RJU1BBVENIRVIgcmVnaXN0ZXJlZCBpbiBTQ2hhdFNlY3Rpb25zU3RvcmUnKTtcclxuICAgIHN3aXRjaCAoYWN0aW9uLmFjdGlvblR5cGUpIHtcclxuICAgICAgICBjYXNlIFNDaGF0Q29uc3RhbnRzLkNPTk5fT1BFTjpcclxuICAgICAgICAgICAgYWN0aXZhdGVTZWN0aW9uKFNFQ1RJT05fTE9HSU4pO1xyXG4gICAgICAgICAgICBTQ2hhdFNlY3Rpb25zU3RvcmUuZW1pdChDSEFOR0VfRVZFTlQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFNDaGF0Q29uc3RhbnRzLkFVVEhPUklaRUQ6XHJcbiAgICAgICAgICAgIGFjdGl2YXRlU2VjdGlvbihTRUNUSU9OX0NIQVQpO1xyXG4gICAgICAgICAgICBTQ2hhdFNlY3Rpb25zU3RvcmUuZW1pdChDSEFOR0VfRVZFTlQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vbm90aGluZ1xyXG4gICAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU0NoYXRTZWN0aW9uc1N0b3JlOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHRvcyBvbiAwOC4xMS4yMDE1LlxyXG4gKi9cclxuXHJcbmxldCBTQ2hhdERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9kaXNwYXRjaGVyL1NDaGF0RGlzcGF0Y2hlcicpLFxyXG4gICAgU0NoYXRDb25zdGFudHMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvU0NoYXRDb25zdGFudHMnKSxcclxuICAgIEVtaXR0ZXIgPSByZXF1aXJlKCcuL2VtaXRlcicpO1xyXG5cclxuY29uc3QgQ0hBTkdFX0VWRU5UID0gJ2NoYW5nZSc7XHJcbmxldCBfdXNlcnMgPSBbXTtcclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVVzZXJzKG5ld1VzZXJzKSB7XHJcbiAgICBfdXNlcnMgPSBuZXdVc2VycztcclxufVxyXG5cclxubGV0IFNDaGF0VXNlcnNTdG9yZSA9IE9iamVjdC5hc3NpZ24oe30sIEVtaXR0ZXIucHJvdG90eXBlLCB7XHJcbiAgICBhZGRDaGFuZ2VMaXN0ZW5lcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmFkZE15TGlzdGVuZXIoQ0hBTkdFX0VWRU5ULCBjYWxsYmFjayk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuU0NoYXREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKGFjdGlvbil7XHJcbiAgICAvL2NvbnNvbGUubG9nKCdESVNQQVRDSEVSIHJlZ2lzdGVyZWQgaW4gU0NoYXRVc2Vyc1N0b3JlJyk7XHJcbiAgICBzd2l0Y2ggKGFjdGlvbi5hY3Rpb25UeXBlKSB7XHJcbiAgICAgICAgY2FzZSBTQ2hhdENvbnN0YW50cy5BQ1RJVkFURV9MT0dJTl9GT1JNOlxyXG4gICAgICAgICAgICAvL1NDaGF0VXNlcnNTdG9yZS5lbWl0KENIQU5HRV9FVkVOVCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vbm90aGluZ1xyXG4gICAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU0NoYXRVc2Vyc1N0b3JlOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHRvcyBvbiAwOC4xMS4yMDE1LlxyXG4gKi9cclxuXHJcbmxldCBFbWl0dGVyID0gZnVuY3Rpb24oKSB7XHJcbn07XHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5hZGRNeUxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsbGlzdGVuZXIpIHtcclxuICAgIGlmICghdGhpcy5fZXZlbnRzKSB0aGlzLl9ldmVudHMgPSB7fTtcclxuICAgIGlmICghdGhpcy5fZXZlbnRzLmhhc093blByb3BlcnR5KGV2ZW50KSkgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdO1xyXG4gICAgdGhpcy5fZXZlbnRzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcclxufTtcclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCwgYXJnKSB7XHJcbiAgICBpZiAodGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcclxuICAgICAgICB0aGlzLl9ldmVudHNbZXZlbnRdLm1hcChmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHYoYXJnKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyOyJdfQ==
